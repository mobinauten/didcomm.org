(self.webpackChunkdidcomm_website=self.webpackChunkdidcomm_website||[]).push([[504],{7235:function(e){e.exports=function(){"use strict";return function(e,t,a){e=e||{};var n=t.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(e,t,a,r){return n.fromToBase(e,t,a,r)}a.en.relativeTime=r,n.fromToBase=function(t,n,o,s,c){for(var l,i,u,m=o.$locale().relativeTime||r,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],h=d.length,f=0;f<h;f+=1){var p=d[f];p.d&&(l=s?a(t).diff(o,p.d,!0):o.diff(t,p.d,!0));var v=(e.rounding||Math.round)(Math.abs(l));if(u=l>0,v<=p.r||!p.r){v<=1&&f>0&&(p=d[f-1]);var g=m[p.l];c&&(v=c(""+v)),i="string"==typeof g?g.replace("%d",v):g(v,n,p.l,u);break}}if(n)return i;var y=u?m.future:m.past;return"function"==typeof y?y(i):y.replace("%s",i)},n.to=function(e,t){return o(e,t,this,!0)},n.from=function(e,t){return o(e,t,this)};var s=function(e){return e.$u?a.utc():a()};n.toNow=function(e){return this.to(s(this),e)},n.fromNow=function(e){return this.from(s(this),e)}}}()},2575:function(e,t,a){"use strict";a.d(t,{gK:function(){return n},Kd:function(){return r},zT:function(){return o}});const n=10,r="https://github.com",o="YYYY MMM D, HH:MM A"},793:function(e,t,a){"use strict";a.d(t,{q:function(){return n}});const n={Proposed:"proposed",Demonstrated:"demonstrated",Production:"production"};let r;!function(e){e.year="year",e.month="month",e.week="week",e.day="day"}(r||(r={}))},1047:function(e,t,a){"use strict";a.d(t,{q:function(){return s}});var n=a(7294),r=a(2575),o=a(6786);const s=({publisher:e,avatar:t})=>n.createElement("a",{rel:"noreferrer noopener nofollow","aria-label":`GitHub profile ${e}`,className:"Avatar-module--avatar--2HGSY",target:"_blank",href:`${r.Kd}/${e}`},n.createElement("div",{style:{backgroundImage:`url(${t})`},className:(0,o.yI)("Avatar-module--img--3CeLS","font-footnote")}),n.createElement("span",{className:(0,o.yI)("font-footnote","Avatar-module--publisher--ktcuv")},"@",e))},2157:function(e,t,a){"use strict";a.d(t,{O:function(){return i}});var n=a(7294),r=a(8538),o=a.n(r),s=a(7235),c=a.n(s),l=a(2575);o().extend(c());const i=({lastModified:e,className:t,since:a})=>{const r=a?o()().to(e):o()(e).format(l.zT);return n.createElement("span",{className:t},r)}},9918:function(e,t,a){"use strict";a.d(t,{q:function(){return m}});var n={};a.r(n),a.d(n,{demonstrated:function(){return u},production:function(){return i},proposed:function(){return l},status:function(){return c}});var r=a(7294),o=a(6786),s=a(793),c="Status-module--status--1dG8s",l="Status-module--proposed--3zY0z",i="Status-module--production--6xwxX",u="Status-module--demonstrated--2VaNN";const m=({type:e})=>r.createElement("div",{className:(0,o.yI)(c,n[s.q[e]])},e)},5205:function(e,t,a){"use strict";a.d(t,{$:function(){return o}});var n=a(7294),r=a(5444);const o=({tags:e,onClick:t})=>{const a=e=>a=>{a.preventDefault(),t(e)};return n.createElement("div",{className:"Tags-module--tags--11-St"},e.map((e=>n.createElement(r.Link,{to:`/search?tag=${e}`,onClick:t?a(e):void 0,key:e,className:"Tags-module--tag--14doh"},"# ",e))))}},9170:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var n=a(7546),r=a(7294),o=a(6633),s=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],a="",n=0,r=e.length;n<r;++n)a+=e.charAt(n),t.push(a);return t},e}(),c=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();function l(e,t){t=t||[];for(var a=e=e||{},n=0;n<t.length;n++)if(null==(a=a[t[n]]))return null;return a}var i=function(){function e(e){this._uidFieldName=e,this._tokenToIdfCache={},this._tokenMap={}}var t=e.prototype;return t.indexDocument=function(e,t,a){this._tokenToIdfCache={};var n,r=this._tokenMap;"object"!=typeof r[e]?r[e]=n={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(n=r[e]).$totalNumOccurrences++;var o=n.$uidMap;"object"!=typeof o[t]?(n.$numDocumentOccurrences++,o[t]={$document:a,$numTokenOccurrences:1}):o[t].$numTokenOccurrences++},t.search=function(e,t){for(var a={},n=0,r=e.length;n<r;n++){var o=e[n],s=this._tokenMap[o];if(!s)return[];if(0===n)for(var c=0,l=(i=Object.keys(s.$uidMap)).length;c<l;c++){a[u=i[c]]=s.$uidMap[u].$document}else{var i;for(c=0,l=(i=Object.keys(a)).length;c<l;c++){var u=i[c];"object"!=typeof s.$uidMap[u]&&delete a[u]}}}var m=[];for(var u in a)m.push(a[u]);var d=this._createCalculateTfIdf();return m.sort((function(a,n){return d(e,n,t)-d(e,a,t)}))},t._createCalculateIdf=function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(a,n){if(!t[a]){var r=void 0!==e[a]?e[a].$numDocumentOccurrences:0;t[a]=1+Math.log(n.length/(1+r))}return t[a]}},t._createCalculateTfIdf=function(){var e=this._tokenMap,t=this._uidFieldName,a=this._createCalculateIdf();return function(n,r,o){for(var s=0,c=0,i=n.length;c<i;++c){var u,m=n[c],d=a(m,o);d===1/0&&(d=0),u=t instanceof Array?r&&l(r,t):r&&r[t],s+=(void 0!==e[m]&&void 0!==e[m].$uidMap[u]?e[m].$uidMap[u].$numTokenOccurrences:0)*d}return s}},e}(),u=/[^a-zа-яё0-9\-']+/i,m=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(u).filter((function(e){return e}))},e}();function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(e){if(!e)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=e,this._indexStrategy=new s,this._searchIndex=new i(e),this._sanitizer=new c,this._tokenizer=new m,this._documents=[],this._searchableFields=[]}var t,a,n,r=e.prototype;return r.addDocument=function(e){this.addDocuments([e])},r.addDocuments=function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)},r.addIndex=function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])},r.search=function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)},r.indexDocuments_=function(e,t){this._initialized=!0;for(var a=this._indexStrategy,n=this._sanitizer,r=this._searchIndex,o=this._tokenizer,s=this._uidFieldName,c=0,i=e.length;c<i;c++){var u,m=e[c];u=s instanceof Array?l(m,s):m[s];for(var d=0,h=t.length;d<h;d++){var f,p=t[d];if(null!=(f=p instanceof Array?l(m,p):m[p])&&"string"!=typeof f&&f.toString&&(f=f.toString()),"string"==typeof f)for(var v=o.tokenize(n.sanitize(f)),g=0,y=v.length;g<y;g++)for(var E=v[g],N=a.expandToken(E),k=0,b=N.length;k<b;k++){var I=N[k];r.indexDocument(I,u,m)}}}},t=e,(a=[{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}])&&d(t.prototype,a),n&&d(t,n),e}();const f=["title","tags","license","summary","publisher","piuri","html"];var p=a(7885),v=a(1937),g=a(6786);const y=({setPage:e,pageCount:t,currentPage:a,next:n,hasNext:o})=>{const s=((e,t)=>{let a=5*Math.floor((t-1)/5);return e-t<5&&t>5&&(a-=5-(e-a)),Array.from({length:Math.min(e,5)},((e,t)=>t+1+a))})(t,a);return t>1?r.createElement("nav",{"aria-label":"pagination",className:"Pagination-module--pagination--3KtNE"},o&&r.createElement("button",{onClick:n,className:(0,g.yI)("font-callout","Pagination-module--next--PX9hj")},"Next"),r.createElement("ul",{className:"Pagination-module--pages--1Bqv1"},s.map((t=>r.createElement("li",{key:t},r.createElement("button",{"aria-current":t===a?"page":void 0,disabled:t===a,className:(0,g.yI)("font-callout","Pagination-module--page--1qgQC",t===a&&"Pagination-module--current--2kpSb"),onClick:()=>e(t)},r.createElement("span",{className:"visually-hidden"},"page ")," ",t))))),s[s.length-1]<t&&r.createElement("div",{className:"Pagination-module--ellipsis--1_1fQ"},"...")):null};var E=a(9918),N=a(5205),k=a(5444),b=a(1047),I=a(2157);const _=({protocol:e,onTagClick:t})=>{const{title:a,slug:n,version:o,status:s,summary:c,tags:l,publisher:i,avatar:u,modifiedDate:m,license:d}=e;return r.createElement("article",{className:(0,g.yI)("ProtocolsListItem-module--item--DycmU","rounded")},r.createElement("div",{className:"ProtocolsListItem-module--header--17jzv"},r.createElement(k.Link,{to:`/${n}`,className:"ProtocolsListItem-module--title--1k0xw"},r.createElement("h2",{className:"font-title-2"},a," ",r.createElement("span",{className:(0,g.yI)("font-footnote","ProtocolsListItem-module--version--1_-CI")},o))),r.createElement(E.q,{type:s})),r.createElement("p",{className:"ProtocolsListItem-module--summary--28MAv"},c),r.createElement(N.$,{onClick:t,tags:l}),r.createElement("div",{className:"ProtocolsListItem-module--footer--35Vqh"},r.createElement("div",{className:"ProtocolsListItem-module--avatar--57tBG"},r.createElement(b.q,{avatar:u,publisher:i})),r.createElement("span",{className:"font-footnote"},d),r.createElement(I.O,{since:!0,className:(0,g.yI)("ProtocolsListItem-module--lastModified--3Yt0s","font-footnote"),lastModified:m})))};var C=a(2575);const x=({protocols:e,onTagClick:t})=>{const{items:a,setPage:n,pagesCount:s,page:c,next:l,hasNext:i}=(e=>{const[t,a]=(0,o.Wd)("page",o.yz);let n=null!=t?t:1;(0,r.useEffect)((()=>{void 0===t&&a(1,"replaceIn")}),[e]);const s=e.slice((n-1)*C.gK,n*C.gK);return{hasNext:e.length>n*C.gK,next:()=>a(n+1),prev:()=>a(n-1),items:s,pagesCount:Math.ceil(e.length/C.gK),setPage:a,page:n}})(e);return r.createElement("div",null,r.createElement("ul",{className:"ProtocolsList-module--list--1Ndxz"},a.map((e=>r.createElement("li",{key:e.slug},r.createElement(_,{onTagClick:t,protocol:e}))))),r.createElement(y,{hasNext:i,next:l,currentPage:c,pageCount:s,setPage:n}))};var P=a(1838);const S=({value:e,onChange:t,label:a,className:n})=>r.createElement("label",{className:(0,g.yI)("Checkbox-module--check--15cne",n)},r.createElement("input",{type:"checkbox",checked:e,onChange:e=>t(e.target.checked),className:(0,g.yI)("visually-hidden","Checkbox-module--input--3BKOi")}),r.createElement("span",{className:(0,g.yI)("Checkbox-module--checkbox--2mZlv","rounded")}),a);var z=a(793),M=a(9042);const $=r.forwardRef((({icon:e,children:t,secondary:a,className:n,primary:o,expanded:s,...c},l)=>r.createElement("button",Object.assign({className:(0,g.yI)("Button-module--button--2t432","font-callout","rounded","shadow-medium",a&&"Button-module--secondary--2lup3",o&&"Button-module--primary--1Znlo",s&&"Button-module--expanded--1tS7m",n),ref:l},c),e?r.createElement(M.l,{icon:e,className:"Button-module--icon--ahMay"}):null,t)));var w="Filters-module--group--39W7Y",D="Filters-module--groupTitle--7YFdO",T="Filters-module--filter--FPzWd";const O=({onChange:e,label:t,value:a,name:n,checked:o,className:s})=>r.createElement("label",{className:(0,g.yI)("Radio-module--radio--1Zv1U",s)},r.createElement("input",{checked:o,className:(0,g.yI)("Radio-module--input--1y39W","visually-hidden"),name:n,type:"radio",value:a,onChange:t=>e(t.target.value)}),r.createElement("div",{className:"Radio-module--control--1gBRR"}),r.createElement("span",{className:"Radio-module--label--3mVdI"},t)),L=({onFilters:e,allLicenses:t,...a})=>{var n,o,s;const{0:c,1:l}=(0,r.useState)({}),{0:i,1:u}=(0,r.useState)({}),{0:m,1:d}=(0,r.useState)();(0,r.useEffect)((()=>{l(Object.assign((0,g.m8)(Object.keys(z.q).map((e=>[e,!1]))),(0,g.m8)(a.status.map((e=>[e,!0]))))),u(Object.assign((0,g.m8)(t.map((e=>[e,!1]))),(0,g.m8)(a.license.map((e=>[e,!0]))))),d(a.date)}),[a.license,a.status,a.date]);const h=(e,t)=>{l({...c,[e]:t})};return r.createElement("div",null,r.createElement("h2",{className:(0,g.yI)("font-headline","Filters-module--title--2w9oT")},"Filters"),r.createElement("form",{autoCorrect:"off",autoComplete:"off",onSubmit:t=>{t.preventDefault(),e({status:Object.keys(c).filter((e=>c[e])),license:Object.keys(i).filter((e=>i[e])),date:m})}},r.createElement("fieldset",{className:w},r.createElement("legend",{className:D},"Status"),r.createElement(S,{className:T,value:null!==(n=c.Proposed)&&void 0!==n&&n,onChange:e=>h("Proposed",e),label:"Proposed"}),r.createElement(S,{className:T,value:null!==(o=c.Demonstrated)&&void 0!==o&&o,onChange:e=>h("Demonstrated",e),label:"Demonstrated"}),r.createElement(S,{className:T,value:null!==(s=c.Production)&&void 0!==s&&s,onChange:e=>h("Production",e),label:"Production"})),r.createElement("fieldset",{className:w},r.createElement("legend",{className:D},"License"),t.map((e=>{var t;return r.createElement(S,{className:T,key:e,value:null!==(t=i[e])&&void 0!==t&&t,onChange:t=>{return a=e,n=t,void u({...i,[a]:n});var a,n},label:e})}))),r.createElement("fieldset",{className:w},r.createElement("legend",{className:D},"Date"),r.createElement(O,{checked:"year"===m,className:T,name:"Date",value:"year",label:g.Pn.year,onChange:d}),r.createElement(O,{checked:"month"===m,className:T,name:"Date",value:"month",label:g.Pn.month,onChange:d}),r.createElement(O,{checked:"week"===m,className:T,name:"Date",value:"week",label:g.Pn.week,onChange:d}),r.createElement(O,{checked:"day"===m,className:T,name:"Date",value:"day",label:g.Pn.day,onChange:d})),r.createElement($,{expanded:!0,secondary:!0,type:"submit"},"Filter")))};const F=({content:e,action:t,className:a,actionIcon:n})=>r.createElement("div",{className:(0,g.yI)("Chips-module--chips--2PD3E",a)},r.createElement("div",{className:(0,g.yI)("font-subheadline","Chips-module--content--1fRc1")},e),r.createElement("button",{className:"Chips-module--action--18xz2",onClick:t},r.createElement(M.l,{ariaHidden:!0,icon:n,className:"Chips-module--actionIcon--3Mnic"}),r.createElement("span",{className:"visually-hidden"},"Drop filter")));var q=a(8739),j="Search-module--chips--kTcRd";var B=({pageContext:e})=>{var t,a,s;const[c,l]=(0,o.Kx)({status:(0,o.Wc)(o.V3,[]),license:(0,o.Wc)(o.V3,[]),tag:(0,o.Wc)(o.V3,[]),q:o.Zp,date:o.Zp}),{0:i,1:u}=(0,r.useState)(!1),m=e=>{let t;(0,g.Jc)(e),u(e),t=e?()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.focus()}:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},setTimeout(t)},d=(0,r.useRef)(),y=(0,r.useRef)(),E=(0,r.useMemo)((()=>(0,g.O)(e.allProtocols,{status:c.status,license:c.license,dateUnit:c.date,tag:c.tag})),[c.status,c.date,c.license,c.tag]),{protocols:N,loading:k}=((e,t,a)=>{const n=(0,r.useRef)(null),{0:o,1:s}=(0,r.useState)([]),{0:c,1:l}=(0,r.useState)(!0);return(0,r.useEffect)((()=>{l(!0),n.current=new h("slug"),f.forEach((e=>n.current.addIndex(e))),n.current.addDocuments(e),s(t?n.current.search(t):e),l(!1)}),a),{protocols:o,loading:c}})(E,c.q,[c.q,E]),b=(e,t)=>{l("date"!==e||t?{...c,[e]:c[e].filter((e=>e!==t))}:{...c,date:void 0})},I=((e,t,a)=>{const n=Boolean(e.license.length||e.status.length||e.tag.length||e.dateUnit);return{prefix:t||n?a:"All",title:`${1===a?"protocol":"protocols"} ${t||n?"found":""} ${t?`for "${t}"`:""}`}})({...c,dateUnit:c.date},c.q,N.length);return r.createElement(v.A,{primary:!0,title:"Browse Protocols"},r.createElement(p.h,null,r.createElement(P.o,{bordered:!0,query:c.q,onSearch:e=>l({...c,q:e},"push")})),r.createElement("div",{className:"content"},r.createElement("h1",{className:"Search-module--title--2Sv1D"},r.createElement("mark",{className:"Search-module--mark--1mwSB"},I.prefix)," ",I.title),r.createElement("div",{className:"grid-3"},r.createElement("main",{className:"Search-module--main--2W9_R"},r.createElement("div",{className:"hide-desktop"},r.createElement($,{ref:y,primary:!0,className:"Search-module--showFilters--1l0jQ",onClick:()=>m(!0),icon:q.P.filter},"Filters")),r.createElement("div",{className:"Search-module--chipsContainer--Q20QU"},null===(t=c.license)||void 0===t?void 0:t.map((e=>r.createElement(F,{className:j,content:`License: ${e}`,actionIcon:q.P.cross,action:()=>b("license",e),key:e}))),null===(a=c.status)||void 0===a?void 0:a.map((e=>r.createElement(F,{className:j,content:`Status: ${e}`,actionIcon:q.P.cross,action:()=>b("status",e),key:e}))),null===(s=c.tag)||void 0===s?void 0:s.map((e=>r.createElement(F,{className:j,content:`Tag: ${e}`,actionIcon:q.P.cross,action:()=>b("tag",e),key:e}))),c.date&&r.createElement(F,{className:j,content:`Date: ${g.Pn[c.date]}`,actionIcon:q.P.cross,action:()=>b("date")})),k?"Loading...":r.createElement(x,{onTagClick:e=>{c.tag.includes(e)||l({...c,tag:[].concat((0,n.Z)(c.tag),[e])},"push")},protocols:N})),r.createElement("aside",{"aria-modal":i,role:i?"dialog":void 0,className:(0,g.yI)("hide-mobile",i&&"Search-module--filters--3UUwN")},r.createElement("button",{ref:d,className:(0,g.yI)("Search-module--close--2JH3A","hide-desktop"),onClick:()=>m(!1)},r.createElement(M.l,{icon:q.P.cross,className:"Search-module--closeIcon--1pWvM"}),r.createElement("span",{className:"visually-hidden"},"Close")),r.createElement(L,{date:c.date,allLicenses:e.allLicenses,license:c.license,status:c.status,onFilters:e=>(m(!1),l({...c,...e},"push"))})))))}}}]);
//# sourceMappingURL=component---src-templates-search-search-tsx-a9f685589414c8421597.js.map